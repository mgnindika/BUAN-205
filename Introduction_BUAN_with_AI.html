<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>BUAN B205 ‚Ä¢ Introduction to Business Analytics with AI</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js" defer></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&display=swap" rel="stylesheet" />
  <style>
    :root{--ink:#0f172a;--sub:#475569;--accent:#7c3aed;--bg:#f8fafc;--card:#ffffff}
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;padding:0;scroll-behavior:smooth;font-family:Inter,system-ui,sans-serif;background:var(--bg);color:var(--ink)}
    .snap-wrapper{height:100vh;overflow-y:scroll;scroll-snap-type:y mandatory}
    .card{scroll-snap-align:start;min-height:100vh;display:flex;align-items:stretch}
    .inner{max-width:1200px;margin:0 auto;padding:2rem;width:100%}
    .panel{background:var(--card);border:1px solid #e5e7eb;border-radius:18px;padding:2rem;box-shadow:0 10px 30px rgba(2,6,23,.06);min-height:calc(100vh - 4rem);display:flex;flex-direction:column}
    h1{font-size:clamp(28px,4.6vw,52px);font-weight:900;letter-spacing:-.02em;margin:0}
    h2{font-size:clamp(22px,3.2vw,36px);font-weight:800;letter-spacing:-.02em;margin:0}
    h3{font-size:clamp(16px,2.2vw,22px);font-weight:700;margin:0}
    .lead{color:var(--sub);font-size:clamp(14px,1.4vw,18px)}
    .pill{display:inline-flex;align-items:center;gap:8px;padding:6px 12px;background:#ede9fe;color:#5b21b6;border-radius:999px;font-weight:800;font-size:12px;letter-spacing:.04em}
    .btn{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:12px;font-weight:800;cursor:pointer;border:none;transition:.2s;text-decoration:none}
    .btn:hover{transform:translateY(-1px);box-shadow:0 4px 12px rgba(0,0,0,.15)}
    .btn.primary{background:var(--accent);color:#fff}
    .btn.ghost{background:#eef2ff;color:#3730a3}
    .btn.small{padding:6px 10px;font-size:12px}
    .grid{display:grid;gap:1rem}
    .grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}
    .grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}
    .grid-cols-12{grid-template-columns:repeat(12,minmax(0,1fr))}
    .col-span-4{grid-column:span 4 / span 4}.col-span-5{grid-column:span 5 / span 5}.col-span-6{grid-column:span 6 / span 6}.col-span-7{grid-column:span 7 / span 7}.col-span-12{grid-column:span 12 / span 12}
    @media (max-width:768px){.col-span-4,.col-span-5,.col-span-6,.col-span-7{grid-column:span 12 / span 12}}
    .kard{background:#fff;border:1px solid #e5e7eb;border-radius:14px;padding:14px;display:flex;gap:12px;align-items:flex-start}
    .icon{width:38px;height:38px;border-radius:10px;background:#f3e8ff;color:#6b21a8;display:flex;align-items:center;justify-content:center;font-weight:900;font-size:18px}
    .muted{color:var(--sub)} .note{font-size:13px;color:#64748b}
    .chart{width:100%;height:300px;position:relative}
    .helper-toggle{position:fixed;bottom:1rem;right:1rem;z-index:1000;border-radius:999px;padding:10px 14px;font-weight:900;background:#7c3aed;color:#fff;box-shadow:0 8px 18px rgba(124,58,237,.25);cursor:pointer;border:none;transition:.2s}
    .helper-toggle:hover{transform:translateY(-2px);box-shadow:0 12px 24px rgba(124,58,237,.35)}
    .helper{position:fixed;bottom:5rem;right:1rem;z-index:999;width:min(90vw,400px)}
    .helper[hidden]{display:none!important}
    .promptbox{width:100%;min-height:80px;border:1px solid #e5e7eb;border-radius:10px;padding:10px;font-family:monospace;font-size:12px;resize:vertical}
    .navdots{position:fixed;right:16px;top:50%;transform:translateY(-50%);display:flex;flex-direction:column;gap:10px;z-index:50}
    .navdots button{width:10px;height:10px;border-radius:999px;background:#c7d2fe;opacity:.6;border:none;cursor:pointer;transition:.2s}
    .navdots button:hover{opacity:.8;transform:scale(1.2)}
    .navdots button.active{background:var(--accent);opacity:1;box-shadow:0 0 0 4px rgba(124,58,237,.15)}
    input,select,textarea{border:1px solid #e5e7eb;border-radius:8px;padding:8px 12px;background:#fff;font-size:14px}
    .mt-2{margin-top:.5rem}.mt-3{margin-top:.75rem}.mt-4{margin-top:1rem}.mt-6{margin-top:1.5rem}.mb-2{margin-bottom:.5rem}.mb-3{margin-bottom:.75rem}.p-3{padding:.75rem}.p-4{padding:1rem}.text-xs{font-size:.75rem}.text-sm{font-size:.875rem}.font-bold{font-weight:700}.text-center{text-align:center}
    .bg-slate-50{background-color:#f8fafc}.bg-violet-50{background-color:#f5f3ff}.bg-yellow-50{background-color:#fefce8}.bg-green-50{background-color:#f0fdf4}
    .border{border:1px solid #e5e7eb}.border-violet-200{border-color:#ddd6fe}.border-yellow-200{border-color:#fde047}.border-green-200{border-color:#bbf7d0}
    .rounded{border-radius:.375rem}.rounded-xl{border-radius:.75rem}
    .text-violet-700{color:#6d28d9}.text-yellow-800{color:#92400e}.text-yellow-700{color:#a16207}.text-green-600{color:#16a34a}.text-red-600{color:#dc2626}.text-blue-600{color:#2563eb}.text-purple-600{color:#9333ea}.underline{text-decoration:underline}
    .flex{display:flex}.flex-1{flex:1 1 0%}.items-center{align-items:center}.justify-between{justify-content:space-between}.gap-2{gap:.5rem}.gap-3{gap:.75rem}.w-full{width:100%}.h-full{height:100%}.max-h-40{max-height:10rem}.overflow-y-auto{overflow-y:auto}.whitespace-pre-wrap{white-space:pre-wrap}.ml-6{margin-left:1.5rem}.list-decimal{list-style-type:decimal}.list-disc{list-style-type:disc}.animate-spin{animation:spin 1s linear infinite}
    @keyframes spin{from{transform:rotate(0)}to{transform:rotate(360deg)}}
  </style>
</head>
<body>
  <!-- Header -->
  <header style="position:sticky;top:0;z-index:40;backdrop-filter:blur(8px);background:rgba(255,255,255,.75);border-bottom:1px solid #e5e7eb">
    <div style="max-width:1200px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;padding:.75rem 1rem">
      <div class="flex items-center gap-3">
        <span style="display:inline-flex;align-items:center;justify-content:center;width:36px;height:36px;border-radius:8px;background:#7c3aed;color:#fff;font-weight:900">BA</span>
        <div>
          <div style="font-size:.875rem;font-weight:900;color:#1f2937">BUAN B205: Business Analytics with AI</div>
          <div style="font-size:.75rem;color:#64748b">Loyola University New Orleans ¬∑ Fall 2025</div>
        </div>
      </div>
      <div class="flex items-center gap-2">
        <button id="prevBtn" class="btn ghost">‚óÄ Prev</button>
        <button id="nextBtn" class="btn primary">Next ‚ñ∂</button>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="snap-wrapper" id="deck">
    <!-- Day 1 -->
    <section id="d1" class="card">
      <div class="inner">
        <div class="panel">
          <div class="flex items-center justify-between">
            <span class="pill">Day 1 ¬∑ The Foundations of BA & AI</span>
            <div class="text-sm" style="color:#64748b">Use ‚Üì or Next ‚ñ∂ to continue</div>
          </div>

          <div class="grid grid-cols-12 mt-6">
            <div class="col-span-7">
              <h1>The Story of Data: From Insight to Action</h1>
              <p class="lead mt-3">What is Business Analytics? Where does AI fit? We'll define the pillars, walk the data‚Üíinsight‚Üíaction flow, and try a simple descriptive exercise.</p>

              <div class="grid grid-cols-3 mt-6 gap-3">
                <div class="kard"><div class="icon">üéØ</div><div><div class="text-xs font-bold" style="color:#64748b;text-transform:uppercase">Goal</div><div style="font-weight:800">Evidence-based decisions</div><div class="note">Descriptive ‚Üí Predictive ‚Üí Prescriptive</div></div></div>
                <div class="kard"><div class="icon">üß†</div><div><div class="text-xs font-bold" style="color:#64748b;text-transform:uppercase">Skills</div><div style="font-weight:800">Business ¬∑ Tech ¬∑ Data Sci</div><div class="note">Pillars of BA</div></div></div>
                <div class="kard"><div class="icon">‚öôÔ∏è</div><div><div class="text-xs font-bold" style="color:#64748b;text-transform:uppercase">Tools</div><div style="font-weight:800">Sheets ¬∑ Excel ¬∑ BI ¬∑ ML</div><div class="note">Gemini & ChatGPT assist</div></div></div>
              </div>

              <div class="mt-6 flex gap-2">
                <button class="btn ghost nav-link" data-target="d1-pillars">Pillars of BA</button>
                <button class="btn ghost nav-link" data-target="d1-types">Three Types</button>
              </div>
            </div>

            <div class="col-span-5">
              <div class="rounded-xl bg-violet-50 border border-violet-200 p-4 h-full flex" style="flex-direction:column">
                <h3 class="mb-2">Core Components of BA</h3>
                <div class="chart"><canvas id="chartBA"></canvas></div>
                <p class="note mt-2">Reading: Davenport & Harris, <em>Competing on Analytics</em> (HBR).</p>
              </div>
            </div>
          </div>

          <div style="margin-top:auto;padding-top:1.5rem" class="flex items-center justify-between">
            <div class="text-xs" style="color:#64748b">Course policies & schedule in Canvas syllabus.</div>
            <button class="btn primary nav-link" data-target="d1-pillars">Continue</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Pillars -->
    <section id="d1-pillars" class="card">
      <div class="inner">
        <div class="panel">
          <span class="pill">Day 1</span>
          <h2 class="mt-2">What is Business Analytics? ‚Äî The Three Pillars</h2>

          <div class="grid grid-cols-3 mt-4 gap-4">
            <div class="kard"><div class="icon">üíº</div><div><h3>Business Acumen</h3><p class="muted">Markets, customers, strategy, KPIs.</p></div></div>
            <div class="kard"><div class="icon">üß∞</div><div><h3>Technical Skills</h3><p class="muted">Data collection, cleaning, SQL, BI.</p></div></div>
            <div class="kard"><div class="icon">üìä</div><div><h3>Data Science & AI</h3><p class="muted">Stats, ML, experimentation, GenAI.</p></div></div>
          </div>

          <div class="grid grid-cols-12 mt-6">
            <div class="col-span-7">
              <h3>Analytics Journey</h3>
              <ol class="list-decimal ml-6" style="color:#475569">
                <li><strong>Data</strong> ‚Üí events, tables</li>
                <li><strong>Information</strong> ‚Üí cleaned, joined</li>
                <li><strong>Insight</strong> ‚Üí patterns, forecasts</li>
                <li><strong>Action</strong> ‚Üí decisions, policies</li>
              </ol>

              <div class="rounded-xl bg-slate-50 border p-4 mt-4">
                <h3 class="mb-2">Quick Quiz</h3>
                <p class="text-sm">Which pillar aligns most with designing an A/B test?</p>
                <div class="mt-2 grid grid-cols-2 gap-2">
                  <button class="ans btn ghost" data-correct="false">Business</button>
                  <button class="ans btn ghost" data-correct="false">Technical</button>
                  <button class="ans btn ghost" data-correct="true">Data Science</button>
                  <button class="ans btn ghost" data-correct="false">None</button>
                </div>
                <div class="mt-2 text-sm" id="quizMsg"></div>
              </div>
            </div>

            <div class="col-span-5">
              <div class="rounded-xl border p-4" style="background:#fff">
                <h3 class="mb-2">Interactive Venn ‚Äî BA Combination</h3>
                <div class="chart"><canvas id="chartVenn"></canvas></div>
                <p class="note">Hover shows overlaps: Biz+Tech = BI, Tech+DS = MLOps, etc.</p>
              </div>
            </div>
          </div>

          <div style="margin-top:auto;padding-top:1.5rem" class="flex items-center justify-between">
            <div class="text-xs" style="color:#64748b">Source: HBR; MIT Sloan articles on AI in business.</div>
            <button class="btn primary nav-link" data-target="d1-types">Next ‚ñ∂ Three Types</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Three Types -->
    <section id="d1-types" class="card">
      <div class="inner">
        <div class="panel">
          <span class="pill">Day 1</span>
          <h2 class="mt-2">The Three Types of Analytics</h2>

          <div class="grid grid-cols-3 mt-4 gap-4">
            <div class="kard"><div class="icon">üîé</div><div><h3>Descriptive</h3><p class="muted">What happened? Dashboards & KPIs.</p></div></div>
            <div class="kard"><div class="icon">üìà</div><div><h3>Predictive</h3><p class="muted">What will happen? Forecasts & models.</p></div></div>
            <div class="kard"><div class="icon">üß≠</div><div><h3>Prescriptive</h3><p class="muted">What should we do? Optimization & policy.</p></div></div>
          </div>

          <div class="grid grid-cols-12 mt-6">
            <div class="col-span-6">
              <h3>Descriptive Example</h3>
              <div class="rounded-xl bg-slate-50 border p-4">
                <p class="text-sm">Q3 Sales by Region</p>
                <div class="chart"><canvas id="chartDesc"></canvas></div>
                <p class="note">Example: Adobe Experience Cloud dashboards.</p>
              </div>
            </div>
            <div class="col-span-6">
              <h3>Predictive Example</h3>
              <div class="rounded-xl bg-slate-50 border p-4">
                <p class="text-sm">AI-assisted forecast</p>
                <div class="chart"><canvas id="chartPred"></canvas></div>
                <p class="note">Example: Zillow Zestimate methodology.</p>
              </div>
            </div>
          </div>

          <div class="grid grid-cols-12 mt-6">
            <div class="col-span-6">
              <h3>Prescriptive Example</h3>
              <div class="rounded-xl bg-slate-50 border p-4">
                <p class="text-sm">Optimal marketing allocation</p>
                <div class="chart"><canvas id="chartPres"></canvas></div>
                <p class="note">Example: HBR analyses of Uber pricing.</p>
              </div>
            </div>
            <div class="col-span-6">
              <h3>Hands-on Exercise</h3>
              <div class="rounded-xl border p-4">
                <p class="text-sm">Dataset: <a class="text-violet-700 underline" target="_blank" href="https://docs.google.com/spreadsheets/d/1m9S7vOb41t4HwX8SFXeDbqYV8w1z6i-pQZ_0i6V3YyQ/edit?usp=sharing">Google Merchandise Store Sample</a></p>
                <ol class="list-decimal ml-6 text-sm mt-2">
                  <li>Make a copy (File ‚Üí Make a copy)</li>
                  <li>Pivot: Category ‚Üí SUM(Revenue)</li>
                  <li>Add region share % and insert Column chart</li>
                </ol>
                <div class="mt-3">
                  <button class="btn primary small use-prompt" data-prompt="Summarize this Google Sheet: https://docs.google.com/spreadsheets/d/1m9S7vOb41t4HwX8SFXeDbqYV8w1z6i-pQZ_0i6V3YyQ/edit?usp=sharing. Build a pivot (Category‚ÜíSUM Revenue), list top 3 categories by revenue, compute region share %, and explain insights in plain English.">Ask Gemini</button>
                </div>
              </div>
            </div>
          </div>

          <div style="margin-top:auto;padding-top:1.5rem" class="flex items-center justify-between">
            <div class="text-xs" style="color:#64748b">Sources: Adobe case studies; Zillow Research; HBR.</div>
            <button class="btn primary nav-link" data-target="d2">Proceed to Day 2</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Day 2 -->
    <section id="d2" class="card">
      <div class="inner">
        <div class="panel">
          <span class="pill">Day 2 ¬∑ Applications & Big Data</span>
          <h2 class="mt-2">Big Data, AI Tools, Real Cases</h2>

          <div class="grid grid-cols-2 mt-4 gap-6">
            <div>
              <h3>Big Data ‚Äî 4Vs Evolution</h3>
              <div class="rounded-xl bg-slate-50 border p-4">
                <div class="chart"><canvas id="chartBigData"></canvas></div>
                <ul class="list-disc ml-6 text-sm muted mt-2">
                  <li><strong>Volume</strong> ‚Äî Petabytes of data daily</li>
                  <li><strong>Velocity</strong> ‚Äî Real-time streaming</li>
                  <li><strong>Variety</strong> ‚Äî Structured + unstructured</li>
                  <li><strong>Veracity</strong> ‚Äî Data quality matters</li>
                </ul>
              </div>
            </div>
            <div>
              <h3>Industry AI Adoption</h3>
              <div class="rounded-xl bg-slate-50 border p-4">
                <div class="chart"><canvas id="chartAdoption"></canvas></div>
                <p class="note mt-2">Source: McKinsey AI Survey 2024</p>
              </div>
            </div>
          </div>

          <div class="grid grid-cols-3 mt-6 gap-4">
            <div class="kard"><div class="icon">üè≠</div><div><h3>Descriptive Case</h3><p class="muted">P&G dashboards enabled supply-chain redesign.</p><p class="note">Source: McKinsey Insights</p></div></div>
            <div class="kard"><div class="icon">üè†</div><div><h3>Predictive Case</h3><p class="muted">Zillow Zestimate ‚Äî property value ML.</p><p class="note">Source: Zillow Research</p></div></div>
            <div class="kard"><div class="icon">üöó</div><div><h3>Prescriptive Case</h3><p class="muted">Uber dynamic pricing balances supply/demand.</p><p class="note">Source: Harvard Business Review</p></div></div>
          </div>

          <div style="margin-top:auto;padding-top:1.5rem" class="flex items-center justify-between">
            <div class="text-xs" style="color:#64748b">Ethics discussion: fairness, transparency, privacy.</div>
            <button class="btn primary nav-link" data-target="d3">Proceed to Day 3</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Day 3 -->
    <section id="d3" class="card">
      <div class="inner">
        <div class="panel">
          <span class="pill">Day 3 ¬∑ Careers & The Future</span>
          <h2 class="mt-2">Job Market, Skills, Certifications</h2>

          <div class="grid grid-cols-2 mt-4 gap-6">
            <div class="rounded-xl bg-slate-50 border p-4">
              <h3 class="mb-2">Salary & Demand Trends</h3>
              <div class="chart"><canvas id="chartCareer"></canvas></div>
              <p class="note mt-2">Sources: BLS, LinkedIn Jobs Report, Glassdoor</p>
            </div>
            <div class="rounded-xl bg-slate-50 border p-4">
              <h3 class="mb-2">Skills by Role</h3>
              <div class="chart"><canvas id="chartSkills"></canvas></div>
              <p class="note mt-2">Core: SQL ¬∑ Python ¬∑ Communication ¬∑ Visualization</p>
            </div>
          </div>

          <div class="grid grid-cols-3 mt-6 gap-4">
            <div class="kard"><div class="icon">üéì</div><div><h3>Top Certifications</h3><p class="muted">Google Data Analytics, Tableau, AWS ML</p></div></div>
            <div class="kard"><div class="icon">üí¨</div><div><h3>Alumni Success</h3><p class="muted">"BA gave me a playbook for measurable impact."</p></div></div>
            <div class="kard"><div class="icon">üß≠</div><div><h3>Hot Industries</h3><p class="muted">Healthcare, Finance, Retail, Tech/Media</p></div></div>
          </div>

          <div class="mt-6 rounded-xl border p-4">
            <h3 class="mb-3">Career Path Builder</h3>
            <div class="grid grid-cols-2 gap-3 mb-4">
              <select id="roleSelect"><option>Data Analyst</option><option>BI Developer</option><option>Data Scientist</option><option>AI/ML Engineer</option><option>BA Manager</option></select>
              <select id="industrySelect"><option>Healthcare</option><option>Finance</option><option>Retail</option><option>Tech/Media</option></select>
            </div>
            <button id="generatePlan" class="btn primary mb-3">Generate Learning Plan</button>
            <div id="careerPlan" class="text-sm bg-slate-50 p-3 rounded" style="display:none">
              <div id="planContent"></div>
            </div>
          </div>

          <div style="margin-top:auto;padding-top:1.5rem" class="flex items-center justify-between">
            <div class="text-xs" style="color:#64748b">Next: Bring 3 job posts and map skills to requirements.</div>
            <button class="btn ghost nav-link" data-target="d1">Back to Start ‚Üë</button>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Gemini Helper -->
  <div id="helper" class="helper" hidden>
    <div class="panel">
      <div class="flex items-center justify-between">
        <h3>Live AI Assistant ‚ú®</h3>
        <button id="helperClose" class="btn ghost">√ó</button>
      </div>

      <div id="apiSetup" class="mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded">
        <h4 class="text-sm font-bold text-yellow-800">üîë Setup Required</h4>
        <p class="text-xs text-yellow-700 mt-2">Enter your Gemini API key:</p>
        <div class="flex gap-2 mt-2">
          <input type="password" id="apiKeyInput" placeholder="Your Gemini API Key" class="flex-1 text-xs">
          <button id="saveApiKey" class="btn primary small">Save</button>
        </div>
        <p class="text-xs text-yellow-700 mt-2">Get a key: <a href="https://makersuite.google.com/app/apikey" target="_blank" class="underline">Google AI Studio</a></p>
      </div>

      <div class="grid grid-cols-2 gap-2 mt-3">
        <button id="askLiveGemini" class="btn primary small" disabled>üß† Ask Gemini</button>
        <button id="openGeminiWeb" class="btn ghost small">üåê Open Web</button>
      </div>

      <textarea id="helperPrompt" class="promptbox mt-2" placeholder="Ask about business analytics..."></textarea>

      <div id="geminiResponse" class="mt-3 p-3 bg-slate-50 border rounded max-h-40 overflow-y-auto text-sm" style="display:none">
        <div class="flex items-center gap-2 mb-2">
          <span class="text-purple-600 font-bold">ü§ñ Gemini:</span>
          <div id="loadingSpinner" class="animate-spin" style="width:12px;height:12px;border:2px solid #7c3aed;border-top:2px solid transparent;border-radius:50%;display:none"></div>
        </div>
        <div id="responseText" class="text-slate-700 whitespace-pre-wrap"></div>
      </div>

      <div class="flex gap-2 mt-2">
        <button id="copyPrompt" class="btn ghost small">üìã Copy</button>
        <button id="clearPrompt" class="btn ghost small">üóëÔ∏è Clear</button>
      </div>

      <p id="statusMsg" class="note mt-2"></p>
    </div>
  </div>
  <button id="helperToggle" class="helper-toggle">Ask Gemini ‚ú®</button>

  <!-- Nav dots -->
  <div class="navdots" id="navdots"></div>

  <script>
    let geminiApiKey = '';
    const sections = ['d1','d1-pillars','d1-types','d2','d3'];
    const colors = {blue:'#3b82f6',green:'#10b981',yellow:'#f59e0b',purple:'#7c3aed',red:'#ef4444',text:'#1f2937'};

    window.addEventListener('load',()=>{ try{
      initializeCharts();
      initializeNavigation();
      initializeGeminiHelper();
      initializeInteractivity();
    }catch(e){ console.log('Init error:',e); }});

    function initializeCharts(){
      try{
        const baCtx=document.getElementById('chartBA');
        if(baCtx) new Chart(baCtx,{type:'doughnut',data:{labels:['Business Acumen','Technical Skills','Data Science & AI'],datasets:[{data:[33,33,34],backgroundColor:[colors.blue,colors.green,colors.yellow],borderColor:'#fff',borderWidth:3}]},options:{responsive:true,maintainAspectRatio:false,cutout:'60%',plugins:{legend:{position:'bottom',labels:{color:colors.text,padding:15}}}}});

        const venn=document.getElementById('chartVenn');
        if(venn) new Chart(venn,{type:'scatter',data:{datasets:[{label:'Business Analytics',data:[{x:50,y:50}],backgroundColor:colors.purple,pointRadius:15}]},options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false}},scales:{x:{display:false,min:0,max:100},y:{display:false,min:0,max:100}}}});

        const desc=document.getElementById('chartDesc');
        if(desc) new Chart(desc,{type:'bar',data:{labels:['North America','Europe','Asia Pacific'],datasets:[{label:'Q3 Sales ($K)',data:[450,380,520],backgroundColor:[colors.blue,colors.green,colors.yellow],borderRadius:8}]},options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false}},scales:{y:{beginAtZero:true,ticks:{color:colors.text}},x:{ticks:{color:colors.text}}}});

        const pred=document.getElementById('chartPred');
        if(pred) new Chart(pred,{type:'line',data:{labels:['Jan','Feb','Mar','Apr','May','Jun'],datasets:[{label:'Actual',data:[120,135,140,130,155,160],borderColor:colors.blue,backgroundColor:'transparent',tension:.3},{label:'Predicted',data:[125,130,145,140,150,165],borderColor:colors.purple,backgroundColor:'transparent',borderDash:[5,5],tension:.3}]},options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{labels:{color:colors.text}}},scales:{y:{ticks:{color:colors.text}},x:{ticks:{color:colors.text}}}});

        const pres=document.getElementById('chartPres');
        if(pres) new Chart(pres,{type:'doughnut',data:{labels:['Social Media','Search (SEM)','Email','Print'],datasets:[{data:[45,30,20,5],backgroundColor:[colors.red,colors.purple,colors.blue,colors.green],borderColor:'#fff',borderWidth:3}]},options:{responsive:true,maintainAspectRatio:false,cutout:'60%',plugins:{legend:{position:'bottom',labels:{color:colors.text,padding:10}}}});

        const big=document.getElementById('chartBigData');
        if(big) new Chart(big,{type:'radar',data:{labels:['Volume','Velocity','Variety','Veracity'],datasets:[{label:'Traditional Data',data:[30,40,25,85],borderColor:colors.blue,backgroundColor:'#3b82f620',pointBackgroundColor:colors.blue},{label:'Big Data Era',data:[95,90,85,60],borderColor:colors.red,backgroundColor:'#ef444420',pointBackgroundColor:colors.red}]},options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{labels:{color:colors.text}}},scales:{r:{beginAtZero:true,max:100,ticks:{display:false},pointLabels:{color:colors.text}}}});

        const adopt=document.getElementById('chartAdoption');
        if(adopt) new Chart(adopt,{type:'bar',data:{labels:['Financial Services','Technology','Healthcare','Retail','Manufacturing'],datasets:[{label:'AI Adoption %',data:[78,85,62,71,58],backgroundColor:[colors.blue,colors.purple,colors.green,colors.yellow,colors.red],borderRadius:6}]},options:{indexAxis:'y',responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false}},scales:{x:{beginAtZero:true,max:100,ticks:{color:colors.text,callback:v=>v+'%'}},y:{ticks:{color:colors.text}}}});

        const career=document.getElementById('chartCareer');
        if(career) new Chart(career,{type:'bar',data:{labels:['Data Analyst','BI Developer','Data Scientist','AI/ML Engineer','BA Manager'],datasets:[{label:'Avg Salary ($K)',data:[75,85,110,125,95],backgroundColor:[colors.green,colors.blue,colors.purple,colors.red,colors.yellow],borderRadius:8}]},options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false}},scales:{y:{beginAtZero:true,ticks:{color:colors.text,callback:v=>'$'+v+'K'}},x:{ticks:{color:colors.text}}}});

        const skills=document.getElementById('chartSkills');
        if(skills) new Chart(skills,{type:'radar',data:{labels:['Programming','Statistics','Business','Communication','Visualization'],datasets:[{label:'Business Analyst',data:[60,70,95,90,85],borderColor:colors.blue,backgroundColor:'#3b82f620',pointBackgroundColor:colors.blue},{label:'Data Scientist',data:[95,90,75,70,80],borderColor:colors.red,backgroundColor:'#ef444420',pointBackgroundColor:colors.red}]},options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{labels:{color:colors.text}}},scales:{r:{beginAtZero:true,max:100,ticks:{display:false},pointLabels:{color:colors.text}}}});
      }catch(e){console.log('Charts error:',e)}
    }

    function initializeNavigation(){
      try{
        const prev=document.getElementById('prevBtn'); const next=document.getElementById('nextBtn'); const dotsBox=document.getElementById('navdots'); const scroller=document.querySelector('.snap-wrapper');
        const els=sections.map(id=>document.getElementById(id)).filter(Boolean);

        function currentIndex(){ const y=scroller.scrollTop; let idx=0,b=Infinity; els.forEach((s,i)=>{const d=Math.abs(s.offsetTop-y); if(d<b){b=d; idx=i;}}); return idx; }
        function go(i){ if(i<0||i>=els.length) return; els[i].scrollIntoView({behavior:'smooth'}); }

        prev?.addEventListener('click',()=>go(currentIndex()-1));
        next?.addEventListener('click',()=>go(currentIndex()+1));
        document.addEventListener('keydown',e=>{ if(['ArrowDown','PageDown'].includes(e.key)){e.preventDefault();go(currentIndex()+1);} if(['ArrowUp','PageUp'].includes(e.key)){e.preventDefault();go(currentIndex()-1);} });

        sections.forEach((id,i)=>{const b=document.createElement('button'); b.title=id; b.addEventListener('click',()=>go(i)); dotsBox.appendChild(b);});
        const dots=()=>{const i=currentIndex(); dotsBox.querySelectorAll('button').forEach((b,bi)=>b.classList.toggle('active',bi===i));};
        scroller.addEventListener('scroll',()=>requestAnimationFrame(dots)); dots();

        document.querySelectorAll('.nav-link').forEach(a=>a.addEventListener('click',e=>{e.preventDefault(); const t=a.getAttribute('data-target'); const node=document.getElementById(t); node?.scrollIntoView({behavior:'smooth'});}));
      }catch(e){console.log('Nav error:',e)}
    }

    function initializeGeminiHelper(){
      try{
        const helper=document.getElementById('helper'), toggle=document.getElementById('helperToggle'), close=document.getElementById('helperClose');
        const prompt=document.getElementById('helperPrompt'), apiKeyInput=document.getElementById('apiKeyInput'), saveKey=document.getElementById('saveApiKey');
        const ask=document.getElementById('askLiveGemini'), openWeb=document.getElementById('openGeminiWeb'), copyBtn=document.getElementById('copyPrompt'), clearBtn=document.getElementById('clearPrompt');
        const respBox=document.getElementById('geminiResponse'), respText=document.getElementById('responseText'), spinner=document.getElementById('loadingSpinner'), status=document.getElementById('statusMsg'), apiSetup=document.getElementById('apiSetup');

        try{ const saved=localStorage.getItem('geminiApiKey'); if(saved){ geminiApiKey=saved; apiKeyInput.value='‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢'; ask.disabled=false; apiSetup.className='mt-3 p-3 bg-green-50 border border-green-200 rounded'; apiSetup.querySelector('h4').textContent='‚úÖ API Key Configured'; } }catch{}

        toggle?.addEventListener('click',()=>helper.hidden=!helper.hidden);
        close?.addEventListener('click',()=>helper.hidden=true);

        saveKey?.addEventListener('click',()=>{ const key=apiKeyInput.value.trim(); if(key && key!=='‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢'){ geminiApiKey=key; try{localStorage.setItem('geminiApiKey',key);}catch{} apiKeyInput.value='‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢'; ask.disabled=false; apiSetup.className='mt-3 p-3 bg-green-50 border border-green-200 rounded'; apiSetup.querySelector('h4').textContent='‚úÖ API Key Configured'; status.textContent='üîë API key saved successfully!'; status.className='note mt-2 text-green-600'; } else { status.textContent='‚ö†Ô∏è Please enter a valid API key.'; status.className='note mt-2 text-red-600'; } });

        ask?.addEventListener('click',async()=>{ const q=(prompt?.value||'').trim(); if(!q){ status.textContent='‚ö†Ô∏è Please enter a question first.'; status.className='note mt-2 text-orange-600'; return; } if(!geminiApiKey){ status.textContent='‚ö†Ô∏è Please configure your API key first.'; status.className='note mt-2 text-red-600'; return; }
          respBox.style.display='block'; spinner.style.display='block'; respText.textContent='Thinking...'; ask.disabled=true; ask.textContent='‚è≥ Thinking...';
          try{
            const url='https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key='+encodeURIComponent(geminiApiKey);
            const r=await fetch(url,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({contents:[{parts:[{text:`As a business analytics instructor, provide a clear educational response to: "${q}". Include practical examples and mention relevant tools (Excel, Sheets, Tableau). Keep it concise (2‚Äì3 paragraphs).` }]}],generationConfig:{temperature:0.7,maxOutputTokens:1024}})});
            if(!r.ok) throw new Error('API Error: '+r.status);
            const data=await r.json();
            const text=data?.candidates?.[0]?.content?.parts?.[0]?.text || 'No response';
            respText.textContent=text; status.textContent='ü§ñ Response generated successfully!'; status.className='note mt-2 text-green-600';
          }catch(err){ respText.textContent='‚ùå Error: '+err.message+'\n\nTip: Check your API key and try again.'; status.textContent='‚ùå Failed to get response.'; status.className='note mt-2 text-red-600'; }
          finally{ spinner.style.display='none'; ask.disabled=false; ask.textContent='üß† Ask Gemini'; }
        });

        openWeb?.addEventListener('click',()=>{ const q=prompt?.value||'Help with business analytics'; window.open('https://gemini.google.com/app?q='+encodeURIComponent(q),'_blank'); status.textContent='üåê Gemini web opened in new tab!'; status.className='note mt-2 text-blue-600'; });
        copyBtn?.addEventListener('click',async()=>{ try{ await navigator.clipboard.writeText(prompt?.value||''); status.textContent='üìã Copied to clipboard!'; status.className='note mt-2 text-green-600'; }catch{ status.textContent='‚ö†Ô∏è Copy failed.'; status.className='note mt-2 text-red-600'; } });
        clearBtn?.addEventListener('click',()=>{ if(prompt) prompt.value=''; respBox.style.display='none'; status.textContent=''; });

        document.querySelectorAll('.use-prompt').forEach(b=>b.addEventListener('click',()=>{ const p=b.getAttribute('data-prompt')||''; if(prompt) prompt.value=p; helper.hidden=false; respBox.style.display='none'; status.textContent='üìù Prompt loaded! Try asking Gemini.'; status.className='note mt-2 text-blue-600'; }));
      }catch(e){console.log('Gemini helper error:',e)}
    }

    function initializeInteractivity(){
      try{
        document.querySelectorAll('.ans').forEach(b=>b.addEventListener('click',()=>{ const ok=b.getAttribute('data-correct')==='true'; const msg=document.getElementById('quizMsg'); if(!msg) return; msg.textContent= ok ? '‚úÖ Correct! A/B testing involves experimental design, which is part of Data Science.' : '‚ùå Not quite. Think about statistical experimental design.'; msg.className= ok ? 'mt-2 text-sm text-green-600' : 'mt-2 text-sm text-red-600'; }));

        const gen=document.getElementById('generatePlan'), role=document.getElementById('roleSelect'), ind=document.getElementById('industrySelect'), box=document.getElementById('careerPlan'), out=document.getElementById('planContent');
        gen?.addEventListener('click',()=>{ const r=role.value, i=ind.value; const plans={ 'Data Analyst':{skills:['SQL','Excel/Sheets','Tableau/Power BI','Statistics','Data Cleaning'],certs:['Google Data Analytics','Tableau Desktop','Microsoft Excel Expert'],timeline:'3‚Äì6 months: Master SQL and Excel, then move to BI tools'}, 'BI Developer':{skills:['SQL','ETL/Data Warehousing','Power BI/Tableau','Database Design'],certs:['Microsoft Power BI','Tableau Server','AWS Cloud Practitioner'],timeline:'6‚Äì9 months: Advanced SQL, then cloud platforms and dashboards'}, 'Data Scientist':{skills:['Python/R','Machine Learning','Statistics','SQL','Data Viz'],certs:['Google ML','Coursera Data Science','AWS ML Specialty'],timeline:'9‚Äì12 months: Programming, then ML and advanced modeling'}, 'AI/ML Engineer':{skills:['Python','TensorFlow/PyTorch','MLOps','Cloud','Software Eng'],certs:['TensorFlow Developer','AWS ML','Kubernetes'],timeline:'12+ months: Deep learning frameworks and production systems'}, 'BA Manager':{skills:['Leadership','Strategy','Data Storytelling','Project Mgmt'],certs:['PMP','Google Analytics','Tableau Certified'],timeline:'6‚Äì9 months: Leadership skills plus advanced analytics'} };
          const p=plans[r]; out.innerHTML=`<h4 class="font-bold text-purple-600 mb-2">${r} in ${i}</h4><div class="mb-3"><strong>Key Skills:</strong><ul class="list-disc ml-6 text-xs mt-1">${p.skills.map(s=>`<li>${s}</li>`).join('')}</ul></div><div class="mb-3"><strong>Recommended Certifications:</strong><ul class="list-disc ml-6 text-xs mt-1">${p.certs.map(s=>`<li>${s}</li>`).join('')}</ul></div><div class="mb-3"><strong>Learning Timeline:</strong><p class="text-xs mt-1">${p.timeline}</p></div><div class="bg-violet-50 p-2 rounded"><p class="text-xs"><strong>Next Step:</strong> Start with the first skill listed and build a portfolio project!</p></div>`; box.style.display='block'; });
      }catch(e){console.log('UX error:',e)}
    }

    // basic guards
    window.addEventListener('error',e=>{ console.log('Global error:',e.message); return true; });
    if(!window.Chart){ console.log('Chart.js not loaded, charts will not display'); }
    if(!window.fetch){ console.log('Fetch API not supported, Gemini integration will not work'); }
  </script>
</body>
</html>
