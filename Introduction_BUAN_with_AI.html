<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>BUAN B205 • Introduction to Business Analytics with AI</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&display=swap" rel="stylesheet" />
  <style>
    :root { 
      --ink: #0f172a; 
      --sub: #475569; 
      --accent: #7c3aed; 
      --bg: #f8fafc; 
      --card: #ffffff; 
    }
    
    * { box-sizing: border-box; }
    
    html, body { 
      height: 100%; 
      margin: 0; 
      padding: 0;
      scroll-behavior: smooth; 
      font-family: Inter, system-ui, sans-serif;
      background: var(--bg);
      color: var(--ink);
    }
    
    .snap-wrapper { 
      height: 100vh; 
      overflow-y: scroll; 
      scroll-snap-type: y mandatory; 
    }
    
    .card { 
      scroll-snap-align: start; 
      min-height: 100vh; 
      display: flex;
      align-items: stretch;
    }
    
    .inner { 
      max-width: 1200px; 
      margin: 0 auto; 
      padding: 2rem; 
      width: 100%;
    }
    
    .panel { 
      background: var(--card); 
      border: 1px solid #e5e7eb; 
      border-radius: 18px; 
      padding: 2rem; 
      box-shadow: 0 10px 30px rgba(2,6,23,.06); 
      min-height: calc(100vh - 4rem); 
      display: flex; 
      flex-direction: column; 
    }
    
    h1 { 
      font-size: clamp(28px, 4.6vw, 52px); 
      font-weight: 900; 
      letter-spacing: -0.02em; 
      margin: 0;
    }
    
    h2 { 
      font-size: clamp(22px, 3.2vw, 36px); 
      font-weight: 800; 
      letter-spacing: -0.02em; 
      margin: 0;
    }
    
    h3 { 
      font-size: clamp(16px, 2.2vw, 22px); 
      font-weight: 700; 
      margin: 0;
    }
    
    .lead { 
      color: var(--sub); 
      font-size: clamp(14px, 1.4vw, 18px); 
    }
    
    .pill { 
      display: inline-flex; 
      align-items: center; 
      gap: 8px; 
      padding: 6px 12px; 
      background: #ede9fe; 
      color: #5b21b6; 
      border-radius: 999px; 
      font-weight: 800; 
      font-size: 12px; 
      letter-spacing: .04em; 
    }
    
    .btn { 
      display: inline-flex; 
      align-items: center; 
      gap: 8px; 
      padding: 10px 14px; 
      border-radius: 12px; 
      font-weight: 800; 
      cursor: pointer; 
      border: none; 
      transition: all 0.2s ease; 
      text-decoration: none;
    }
    
    .btn:hover { 
      transform: translateY(-1px); 
      box-shadow: 0 4px 12px rgba(0,0,0,0.15); 
    }
    
    .btn.primary { 
      background: var(--accent); 
      color: white; 
    }
    
    .btn.ghost { 
      background: #eef2ff; 
      color: #3730a3; 
    }
    
    .btn.small { 
      padding: 6px 10px; 
      font-size: 12px; 
    }
    
    .grid { 
      display: grid; 
      gap: 1rem; 
    }
    
    .grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
    .grid-cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
    .grid-cols-12 { grid-template-columns: repeat(12, minmax(0, 1fr)); }
    
    .col-span-4 { grid-column: span 4 / span 4; }
    .col-span-5 { grid-column: span 5 / span 5; }
    .col-span-6 { grid-column: span 6 / span 6; }
    .col-span-7 { grid-column: span 7 / span 7; }
    .col-span-12 { grid-column: span 12 / span 12; }
    
    @media (max-width: 768px) {
      .col-span-4, .col-span-5, .col-span-6, .col-span-7 { 
        grid-column: span 12 / span 12; 
      }
    }
    
    .kard { 
      background: #ffffff; 
      border: 1px solid #e5e7eb; 
      border-radius: 14px; 
      padding: 14px; 
      display: flex; 
      gap: 12px; 
      align-items: flex-start; 
    }
    
    .icon { 
      width: 38px; 
      height: 38px; 
      border-radius: 10px; 
      background: #f3e8ff; 
      color: #6b21a8; 
      display: flex; 
      align-items: center; 
      justify-content: center; 
      font-weight: 900; 
      font-size: 18px; 
    }
    
    .muted { color: var(--sub); }
    .note { font-size: 13px; color: #64748b; }
    
    .chart { 
      width: 100%; 
      height: 300px; 
      position: relative; 
    }
    
    .helper-toggle { 
      position: fixed;
      bottom: 1rem;
      right: 1rem;
      z-index: 1000;
      border-radius: 999px; 
      padding: 10px 14px; 
      font-weight: 900; 
      background: #7c3aed; 
      color: white; 
      box-shadow: 0 8px 18px rgba(124,58,237,.25); 
      cursor: pointer; 
      border: none; 
      transition: all 0.2s ease; 
    }
    
    .helper-toggle:hover { 
      transform: translateY(-2px); 
      box-shadow: 0 12px 24px rgba(124,58,237,.35); 
    }
    
    .helper { 
      position: fixed; 
      bottom: 5rem; 
      right: 1rem; 
      z-index: 999; 
      width: min(90vw, 400px);
    }
    
    .helper[hidden] { display: none !important; }
    
    .promptbox { 
      width: 100%; 
      min-height: 80px; 
      border: 1px solid #e5e7eb; 
      border-radius: 10px; 
      padding: 10px; 
      font-family: monospace; 
      font-size: 12px; 
      resize: vertical; 
    }
    
    .navdots { 
      position: fixed; 
      right: 16px; 
      top: 50%; 
      transform: translateY(-50%); 
      display: flex; 
      flex-direction: column; 
      gap: 10px; 
      z-index: 50; 
    }
    
    .navdots button { 
      width: 10px; 
      height: 10px; 
      border-radius: 999px; 
      background: #c7d2fe; 
      opacity: .6; 
      border: none; 
      cursor: pointer; 
      transition: all 0.2s ease; 
    }
    
    .navdots button:hover { 
      opacity: 0.8; 
      transform: scale(1.2); 
    }
    
    .navdots button.active { 
      background: var(--accent); 
      opacity: 1; 
      box-shadow: 0 0 0 4px rgba(124,58,237,.15); 
    }
    
    input, select, textarea { 
      border: 1px solid #e5e7eb; 
      border-radius: 8px; 
      padding: 8px 12px; 
      background: white; 
      font-size: 14px; 
    }
    
    .mt-2 { margin-top: 0.5rem; }
    .mt-3 { margin-top: 0.75rem; }
    .mt-4 { margin-top: 1rem; }
    .mt-6 { margin-top: 1.5rem; }
    .mb-2 { margin-bottom: 0.5rem; }
    .mb-3 { margin-bottom: 0.75rem; }
    .p-3 { padding: 0.75rem; }
    .p-4 { padding: 1rem; }
    .text-xs { font-size: 0.75rem; }
    .text-sm { font-size: 0.875rem; }
    .font-bold { font-weight: 700; }
    .text-center { text-align: center; }
    .bg-slate-50 { background-color: #f8fafc; }
    .bg-violet-50 { background-color: #f5f3ff; }
    .bg-yellow-50 { background-color: #fefce8; }
    .bg-green-50 { background-color: #f0fdf4; }
    .border { border: 1px solid #e5e7eb; }
    .border-violet-200 { border-color: #ddd6fe; }
    .border-yellow-200 { border-color: #fde047; }
    .border-green-200 { border-color: #bbf7d0; }
    .rounded { border-radius: 0.375rem; }
    .rounded-xl { border-radius: 0.75rem; }
    .text-violet-700 { color: #6d28d9; }
    .text-yellow-800 { color: #92400e; }
    .text-yellow-700 { color: #a16207; }
    .text-yellow-600 { color: #ca8a04; }
    .text-green-600 { color: #16a34a; }
    .text-red-600 { color: #dc2626; }
    .text-blue-600 { color: #2563eb; }
    .text-purple-600 { color: #9333ea; }
    .text-orange-600 { color: #ea580c; }
    .underline { text-decoration: underline; }
    .flex { display: flex; }
    .flex-1 { flex: 1 1 0%; }
    .items-center { align-items: center; }
    .justify-between { justify-content: space-between; }
    .gap-2 { gap: 0.5rem; }
    .gap-3 { gap: 0.75rem; }
    .w-full { width: 100%; }
    .h-full { height: 100%; }
    .max-h-40 { max-height: 10rem; }
    .overflow-y-auto { overflow-y: auto; }
    .whitespace-pre-wrap { white-space: pre-wrap; }
    .ml-6 { margin-left: 1.5rem; }
    .list-decimal { list-style-type: decimal; }
    .list-disc { list-style-type: disc; }
    .animate-spin { animation: spin 1s linear infinite; }
    
    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header style="position: sticky; top: 0; z-index: 40; backdrop-filter: blur(8px); background: rgba(255,255,255,0.75); border-bottom: 1px solid #e5e7eb;">
    <div style="max-width: 1200px; margin: 0 auto; display: flex; align-items: center; justify-content: space-between; padding: 0.75rem 1rem;">
      <div class="flex items-center gap-3">
        <span style="display: inline-flex; align-items: center; justify-content: center; width: 36px; height: 36px; border-radius: 8px; background: #7c3aed; color: white; font-weight: 900;">BA</span>
        <div>
          <div style="font-size: 0.875rem; font-weight: 900; color: #1f2937;">BUAN B205: Business Analytics with AI</div>
          <div style="font-size: 0.75rem; color: #64748b;">Loyola University New Orleans · Fall 2025</div>
        </div>
      </div>
      <div class="flex items-center gap-2">
        <button id="prevBtn" class="btn ghost">◀ Prev</button>
        <button id="nextBtn" class="btn primary">Next ▶</button>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="snap-wrapper" id="deck">
    
    <!-- Section 1: Introduction -->
    <section id="d1" class="card">
      <div class="inner">
        <div class="panel">
          <div class="flex items-center justify-between">
            <span class="pill">Day 1 · The Foundations of BA & AI</span>
            <div class="text-sm" style="color: #64748b;">Use ↓ or Next ▶ to continue</div>
          </div>
          
          <div class="grid grid-cols-12 mt-6">
            <div class="col-span-7">
              <h1>The Story of Data: From Insight to Action</h1>
              <p class="lead mt-3">What is Business Analytics? Where does AI fit? We'll define the pillars, walk the data→insight→action flow, and try a simple descriptive exercise.</p>
              
              <div class="grid grid-cols-3 mt-6 gap-3">
                <div class="kard">
                  <div class="icon">🎯</div>
                  <div>
                    <div class="text-xs font-bold" style="color: #64748b; text-transform: uppercase;">Goal</div>
                    <div style="font-weight: 800;">Evidence‑based decisions</div>
                    <div class="note">Descriptive → Predictive → Prescriptive</div>
                  </div>
                </div>
                <div class="kard">
                  <div class="icon">🧠</div>
                  <div>
                    <div class="text-xs font-bold" style="color: #64748b; text-transform: uppercase;">Skills</div>
                    <div style="font-weight: 800;">Business · Tech · Data Sci</div>
                    <div class="note">Pillars of BA</div>
                  </div>
                </div>
                <div class="kard">
                  <div class="icon">⚙️</div>
                  <div>
                    <div class="text-xs font-bold" style="color: #64748b; text-transform: uppercase;">Tools</div>
                    <div style="font-weight: 800;">Sheets · Excel · BI · ML</div>
                    <div class="note">Gemini & ChatGPT assist</div>
                  </div>
                </div>
              </div>
              
              <div class="mt-6 flex gap-2">
                <button class="btn ghost nav-link" data-target="d1-pillars">Pillars of BA</button>
                <button class="btn ghost nav-link" data-target="d1-types">Three Types</button>
              </div>
            </div>
            
            <div class="col-span-5">
              <div class="rounded-xl bg-violet-50 border-violet-200 p-4 h-full flex" style="flex-direction: column;">
                <h3 class="mb-2">Core Components of BA</h3>
                <div class="chart">
                  <canvas id="chartBA"></canvas>
                </div>
                <p class="note mt-2">Reading: Davenport & Harris, <em>Competing on Analytics</em> (HBR).</p>
              </div>
            </div>
          </div>
          
          <div style="margin-top: auto; padding-top: 1.5rem;" class="flex items-center justify-between">
            <div class="text-xs" style="color: #64748b;">Course policies & schedule in Canvas syllabus.</div>
            <button class="btn primary nav-link" data-target="d1-pillars">Continue</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Section 2: Pillars -->
    <section id="d1-pillars" class="card">
      <div class="inner">
        <div class="panel">
          <span class="pill">Day 1</span>
          <h2 class="mt-2">What is Business Analytics? — The Three Pillars</h2>
          
          <div class="grid grid-cols-3 mt-4 gap-4">
            <div class="kard">
              <div class="icon">💼</div>
              <div>
                <h3>Business Acumen</h3>
                <p class="muted">Markets, customers, strategy, KPIs.</p>
              </div>
            </div>
            <div class="kard">
              <div class="icon">🧰</div>
              <div>
                <h3>Technical Skills</h3>
                <p class="muted">Data collection, cleaning, SQL, BI.</p>
              </div>
            </div>
            <div class="kard">
              <div class="icon">📊</div>
              <div>
                <h3>Data Science & AI</h3>
                <p class="muted">Stats, ML, experimentation, GenAI.</p>
              </div>
            </div>
          </div>
          
          <div class="grid grid-cols-12 mt-6">
            <div class="col-span-7">
              <h3>Analytics Journey</h3>
              <ol class="list-decimal ml-6" style="color: #475569;">
                <li><strong>Data</strong> → events, tables</li>
                <li><strong>Information</strong> → cleaned, joined</li>
                <li><strong>Insight</strong> → patterns, forecasts</li>
                <li><strong>Action</strong> → decisions, policies</li>
              </ol>
              
              <div class="rounded-xl bg-slate-50 border p-4 mt-4">
                <h3 class="mb-2">Quick Quiz</h3>
                <p class="text-sm">Which pillar aligns most with designing an A/B test?</p>
                <div class="mt-2 grid grid-cols-2 gap-2">
                  <button class="ans btn ghost" data-correct="false">Business</button>
                  <button class="ans btn ghost" data-correct="false">Technical</button>
                  <button class="ans btn ghost" data-correct="true">Data Science</button>
                  <button class="ans btn ghost" data-correct="false">None</button>
                </div>
                <div class="mt-2 text-sm" id="quizMsg"></div>
              </div>
            </div>
            
            <div class="col-span-5">
              <div class="rounded-xl border p-4" style="background: white;">
                <h3 class="mb-2">Interactive Venn — BA Combination</h3>
                <div class="chart">
                  <canvas id="chartVenn"></canvas>
                </div>
                <p class="note">Hover shows overlaps: Biz+Tech = BI, Tech+DS = MLOps, etc.</p>
              </div>
            </div>
          </div>
          
          <div style="margin-top: auto; padding-top: 1.5rem;" class="flex items-center justify-between">
            <div class="text-xs" style="color: #64748b;">Source: HBR; MIT Sloan articles on AI in business.</div>
            <button class="btn primary nav-link" data-target="d1-types">Next ▶ Three Types</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Section 3: Three Types -->
    <section id="d1-types" class="card">
      <div class="inner">
        <div class="panel">
          <span class="pill">Day 1</span>
          <h2 class="mt-2">The Three Types of Analytics</h2>
          
          <div class="grid grid-cols-3 mt-4 gap-4">
            <div class="kard">
              <div class="icon">🔎</div>
              <div>
                <h3>Descriptive</h3>
                <p class="muted">What happened? Dashboards & KPIs.</p>
              </div>
            </div>
            <div class="kard">
              <div class="icon">📈</div>
              <div>
                <h3>Predictive</h3>
                <p class="muted">What will happen? Forecasts & models.</p>
              </div>
            </div>
            <div class="kard">
              <div class="icon">🧭</div>
              <div>
                <h3>Prescriptive</h3>
                <p class="muted">What should we do? Optimization & policy.</p>
              </div>
            </div>
          </div>
          
          <div class="grid grid-cols-12 mt-6">
            <div class="col-span-6">
              <h3>Descriptive Example</h3>
              <div class="rounded-xl bg-slate-50 border p-4">
                <p class="text-sm">Q3 Sales by Region</p>
                <div class="chart">
                  <canvas id="chartDesc"></canvas>
                </div>
                <p class="note">Example: Adobe Experience Cloud dashboards.</p>
              </div>
            </div>
            <div class="col-span-6">
              <h3>Predictive Example</h3>
              <div class="rounded-xl bg-slate-50 border p-4">
                <p class="text-sm">AI-assisted forecast</p>
                <div class="chart">
                  <canvas id="chartPred"></canvas>
                </div>
                <p class="note">Example: Zillow Zestimate methodology.</p>
              </div>
            </div>
          </div>
          
          <div class="grid grid-cols-12 mt-6">
            <div class="col-span-6">
              <h3>Prescriptive Example</h3>
              <div class="rounded-xl bg-slate-50 border p-4">
                <p class="text-sm">Optimal marketing allocation</p>
                <div class="chart">
                  <canvas id="chartPres"></canvas>
                </div>
                <p class="note">Example: HBR analyses of Uber pricing.</p>
              </div>
            </div>
            <div class="col-span-6">
              <h3>Hands‑on Exercise</h3>
              <div class="rounded-xl border p-4">
                <p class="text-sm">Dataset: <a class="text-violet-700 underline" target="_blank" href="https://docs.google.com/spreadsheets/d/1m9S7vOb41t4HwX8SFXeDbqYV8w1z6i-pQZ_0i6V3YyQ/edit?usp=sharing">Google Merchandise Store Sample</a></p>
                <ol class="list-decimal ml-6 text-sm mt-2">
                  <li>Make a copy (File → Make a copy)</li>
                  <li>Pivot: Category → SUM(Revenue)</li>
                  <li>Add region share % and insert Column chart</li>
                </ol>
                <div class="mt-3">
                  <button class="btn primary small use-prompt" data-prompt="Help me analyze Google Sheets data with pivot tables for revenue by category. Provide step-by-step instructions.">Ask Gemini</button>
                </div>
              </div>
            </div>
          </div>
          
          <div style="margin-top: auto; padding-top: 1.5rem;" class="flex items-center justify-between">
            <div class="text-xs" style="color: #64748b;">Sources: Adobe case studies; Zillow Research; HBR.</div>
            <button class="btn primary nav-link" data-target="d2">Proceed to Day 2</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Section 4: Day 2 -->
    <section id="d2" class="card">
      <div class="inner">
        <div class="panel">
          <span class="pill">Day 2 · Applications & Big Data</span>
          <h2 class="mt-2">Big Data, AI Tools, Real Cases</h2>
          
          <div class="grid grid-cols-2 mt-4 gap-6">
            <div>
              <h3>Big Data — 4Vs Evolution</h3>
              <div class="rounded-xl bg-slate-50 border p-4">
                <div class="chart">
                  <canvas id="chartBigData"></canvas>
                </div>
                <ul class="list-disc ml-6 text-sm muted mt-2">
                  <li><strong>Volume</strong> — Petabytes of data daily</li>
                  <li><strong>Velocity</strong> — Real-time streaming</li>
                  <li><strong>Variety</strong> — Structured + unstructured</li>
                  <li><strong>Veracity</strong> — Data quality matters</li>
                </ul>
              </div>
            </div>
            <div>
              <h3>Industry AI Adoption</h3>
              <div class="rounded-xl bg-slate-50 border p-4">
                <div class="chart">
                  <canvas id="chartAdoption"></canvas>
                </div>
                <p class="note mt-2">Source: McKinsey AI Survey 2024</p>
              </div>
            </div>
          </div>
          
          <div class="grid grid-cols-3 mt-6 gap-4">
            <div class="kard">
              <div class="icon">🏭</div>
              <div>
                <h3>Descriptive Case</h3>
                <p class="muted">P&G dashboards enabled supply‑chain redesign.</p>
                <p class="note">Source: McKinsey Insights</p>
              </div>
            </div>
            <div class="kard">
              <div class="icon">🏠</div>
              <div>
                <h3>Predictive Case</h3>
                <p class="muted">Zillow Zestimate — property value ML.</p>
                <p class="note">Source: Zillow Research</p>
              </div>
            </div>
            <div class="kard">
              <div class="icon">🚗</div>
              <div>
                <h3>Prescriptive Case</h3>
                <p class="muted">Uber dynamic pricing balances supply/demand.</p>
                <p class="note">Source: Harvard Business Review</p>
              </div>
            </div>
          </div>
          
          <div style="margin-top: auto; padding-top: 1.5rem;" class="flex items-center justify-between">
            <div class="text-xs" style="color: #64748b;">Ethics discussion: fairness, transparency, privacy.</div>
            <button class="btn primary nav-link" data-target="d3">Proceed to Day 3</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Section 5: Day 3 -->
    <section id="d3" class="card">
      <div class="inner">
        <div class="panel">
          <span class="pill">Day 3 · Careers & The Future</span>
          <h2 class="mt-2">Job Market, Skills, Certifications</h2>
          
          <div class="grid grid-cols-2 mt-4 gap-6">
            <div class="rounded-xl bg-slate-50 border p-4">
              <h3 class="mb-2">Salary & Demand Trends</h3>
              <div class="chart">
                <canvas id="chartCareer"></canvas>
              </div>
              <p class="note mt-2">Sources: BLS, LinkedIn Jobs Report, Glassdoor</p>
            </div>
            <div class="rounded-xl bg-slate-50 border p-4">
              <h3 class="mb-2">Skills by Role</h3>
              <div class="chart">
                <canvas id="chartSkills"></canvas>
              </div>
              <p class="note mt-2">Core: SQL · Python · Communication · Visualization</p>
            </div>
          </div>
          
          <div class="grid grid-cols-3 mt-6 gap-4">
            <div class="kard">
              <div class="icon">🎓</div>
              <div>
                <h3>Top Certifications</h3>
                <p class="muted">Google Data Analytics, Tableau, AWS ML</p>
              </div>
            </div>
            <div class="kard">
              <div class="icon">💬</div>
              <div>
                <h3>Alumni Success</h3>
                <p class="muted">"BA gave me a playbook for measurable impact."</p>
              </div>
            </div>
            <div class="kard">
              <div class="icon">🧭</div>
              <div>
                <h3>Hot Industries</h3>
                <p class="muted">Healthcare, Finance, Retail, Tech/Media</p>
              </div>
            </div>
          </div>
          
          <div class="mt-6 rounded-xl border p-4">
            <h3 class="mb-3">Career Path Builder</h3>
            <div class="grid grid-cols-2 gap-3 mb-4">
              <select id="roleSelect">
                <option>Data Analyst</option>
                <option>BI Developer</option>
                <option>Data Scientist</option>
                <option>AI/ML Engineer</option>
                <option>BA Manager</option>
              </select>
              <select id="industrySelect">
                <option>Healthcare</option>
                <option>Finance</option>
                <option>Retail</option>
                <option>Tech/Media</option>
              </select>
            </div>
            <button id="generatePlan" class="btn primary mb-3">Generate Learning Plan</button>
            <div id="careerPlan" class="text-sm bg-slate-50 p-3 rounded" style="display:none;">
              <div id="planContent"></div>
            </div>
          </div>
          
          <div style="margin-top: auto; padding-top: 1.5rem;" class="flex items-center justify-between">
            <div class="text-xs" style="color: #64748b;">Next: Bring 3 job posts and map skills to requirements.</div>
            <button class="btn ghost nav-link" data-target="d1">Back to Start ↑</button>
          </div>
        </div>
      </div>
    </section>

  </main>

  <!-- Live Gemini Helper -->
  <div id="helper" class="helper" hidden>
    <div class="panel">
      <div class="flex items-center justify-between">
        <h3>Live AI Assistant ✨</h3>
        <button id="helperClose" class="btn ghost">×</button>
      </div>
      
      <!-- API Setup -->
      <div id="apiSetup" class="mt-3 p-3 bg-yellow-50 border-yellow-200 rounded">
        <h4 class="text-sm font-bold text-yellow-800">🔑 Setup Required</h4>
        <p class="text-xs text-yellow-700 mt-2">Enter your Gemini API key:</p>
        <div class="flex gap-2 mt-2">
          <input type="password" id="apiKeyInput" placeholder="Your Gemini API Key" class="flex-1 text-xs">
          <button id="saveApiKey" class="btn primary small">Save</button>
        </div>
        <p class="text-xs text-yellow-600 mt-2">Get free key: <a href="https://makersuite.google.com/app/apikey" target="_blank" class="underline">Google AI Studio</a></p>
      </div>
      
      <!-- Controls -->
      <div class="grid grid-cols-2 gap-2 mt-3">
        <button id="askLiveGemini" class="btn primary small" disabled>🧠 Ask Gemini</button>
        <button id="openGeminiWeb" class="btn ghost small">🌐 Open Web</button>
      </div>
      
      <textarea id="helperPrompt" class="promptbox mt-2" placeholder="Ask about business analytics..."></textarea>
      
      <!-- Response Area -->
      <div id="geminiResponse" class="mt-3 p-3 bg-slate-50 border rounded max-h-40 overflow-y-auto text-sm" style="display:none;">
        <div class="flex items-center gap-2 mb-2">
          <span class="text-purple-600 font-bold">🤖 Gemini:</span>
          <div id="loadingSpinner" class="animate-spin" style="width: 12px; height: 12px; border: 2px solid #7c3aed; border-top: 2px solid transparent; border-radius: 50%; display: none;"></div>
        </div>
        <div id="responseText" class="text-slate-700 whitespace-pre-wrap"></div>
      </div>
      
      <div class="flex gap-2 mt-2">
        <button id="copyPrompt" class="btn ghost small">📋 Copy</button>
        <button id="clearPrompt" class="btn ghost small">🗑️ Clear</button>
      </div>
      
      <p id="statusMsg" class="note mt-2"></p>
    </div>
  </div>

  <button id="helperToggle" class="helper-toggle">Ask Gemini ✨</button>

  <!-- Navigation Dots -->
  <div class="navdots" id="navdots"></div>

  <script>
    // Global variables
    let geminiApiKey = '';
    const sections = ['d1', 'd1-pillars', 'd1-types', 'd2', 'd3'];
    
    // Color palette
    const colors = {
      blue: '#3b82f6',
      green: '#10b981', 
      yellow: '#f59e0b',
      purple: '#7c3aed',
      red: '#ef4444',
      text: '#1f2937'
    };

    // Initialize everything when page loads
    window.addEventListener('load', function() {
      try {
        initializeCharts();
        initializeNavigation();
        initializeGeminiHelper();
        initializeInteractivity();
        console.log('All systems initialized successfully');
      } catch (error) {
        console.log('Initialization error:', error);
      }
    });

    function initializeCharts() {
      try {
        // Core BA Components Chart
        const baCtx = document.getElementById('chartBA');
        if (baCtx) {
          new Chart(baCtx, {
            type: 'doughnut',
            data: {
              labels: ['Business Acumen', 'Technical Skills', 'Data Science & AI'],
              datasets: [{
                data: [33, 33, 34],
                backgroundColor: [colors.blue, colors.green, colors.yellow],
                borderColor: '#ffffff',
                borderWidth: 3
              }]
            },
            options: {
              responsive: true,
              maintainAspectRatio: false,
              cutout: '60%',
              plugins: {
                legend: {
                  position: 'bottom',
                  labels: { color: colors.text, padding: 15 }
                }
              }
            }
          });
        }

        // Venn Diagram as Scatter Plot
        const vennCtx = document.getElementById('chartVenn');
        if (vennCtx) {
          new Chart(vennCtx, {
            type: 'scatter',
            data: {
              datasets: [{
                label: 'Business Analytics',
                data: [{x: 50, y: 50}],
                backgroundColor: colors.purple,
                pointRadius: 15
              }]
            },
            options: {
              responsive: true,
              maintainAspectRatio: false,
              plugins: {
                legend: { display: false }
              },
              scales: {
                x: { display: false, min: 0, max: 100 },
                y: { display: false, min: 0, max: 100 }
              }
            }
          });
        }

        // Descriptive Analytics Chart
        const descCtx = document.getElementById('chartDesc');
        if (descCtx) {
          new Chart(descCtx, {
            type: 'bar',
            data: {
              labels: ['North America', 'Europe', 'Asia Pacific'],
              datasets: [{
                label: 'Q3 Sales ($K)',
                data: [450, 380, 520],
                backgroundColor: [colors.blue, colors.green, colors.yellow],
                borderRadius: 8
              }]
            },
            options: {
              responsive: true,
              maintainAspectRatio: false,
              plugins: { legend: { display: false } },
              scales: {
                y: { beginAtZero: true, ticks: { color: colors.text } },
                x: { ticks: { color: colors.text } }
              }
            }
          });
        }

        // Predictive Analytics Chart
        const predCtx = document.getElementById('chartPred');
        if (predCtx) {
          new Chart(predCtx, {
            type: 'line',
            data: {
              labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
              datasets: [{
                label: 'Actual',
                data: [120, 135, 140, 130, 155, 160],
                borderColor: colors.blue,
                backgroundColor: 'transparent',
                tension: 0.3
              }, {
                label: 'Predicted',
                data: [125, 130, 145, 140, 150, 165],
                borderColor: colors.purple,
                backgroundColor: 'transparent',
                borderDash: [5, 5],
                tension: 0.3
              }]
            },
            options: {
              responsive: true,
              maintainAspectRatio: false,
              plugins: { legend: { labels: { color: colors.text } } },
              scales: {
                y: { ticks: { color: colors.text } },
                x: { ticks: { color: colors.text } }
              }
            }
          });
        }

        // Prescriptive Analytics Chart
        const presCtx = document.getElementById('chartPres');
        if (presCtx) {
          new Chart(presCtx, {
            type: 'doughnut',
            data: {
              labels: ['Social Media', 'Search (SEM)', 'Email', 'Print'],
              datasets: [{
                data: [45, 30, 20, 5],
                backgroundColor: [colors.red, colors.purple, colors.blue, colors.green],
                borderColor: '#ffffff',
                borderWidth: 3
              }]
            },
            options: {
              responsive: true,
              maintainAspectRatio: false,
              cutout: '60%',
              plugins: {
                legend: { position: 'bottom', labels: { color: colors.text, padding: 10 } }
              }
            }
          });
        }

        // Big Data Chart
        const bigDataCtx = document.getElementById('chartBigData');
        if (bigDataCtx) {
          new Chart(bigDataCtx, {
            type: 'radar',
            data: {
              labels: ['Volume', 'Velocity', 'Variety', 'Veracity'],
              datasets: [{
                label: 'Traditional Data',
                data: [30, 40, 25, 85],
                borderColor: colors.blue,
                backgroundColor: colors.blue + '20',
                pointBackgroundColor: colors.blue
              }, {
                label: 'Big Data Era',
                data: [95, 90, 85, 60],
                borderColor: colors.red,
                backgroundColor: colors.red + '20',
                pointBackgroundColor: colors.red
              }]
            },
            options: {
              responsive: true,
              maintainAspectRatio: false,
              plugins: { legend: { labels: { color: colors.text } } },
              scales: {
                r: {
                  beginAtZero: true,
                  max: 100,
                  ticks: { display: false },
                  pointLabels: { color: colors.text }
                }
              }
            }
          });
        }

        // Industry Adoption Chart
        const adoptionCtx = document.getElementById('chartAdoption');
        if (adoptionCtx) {
          new Chart(adoptionCtx, {
            type: 'bar',
            data: {
              labels: ['Financial Services', 'Technology', 'Healthcare', 'Retail', 'Manufacturing'],
              datasets: [{
                label: 'AI Adoption %',
                data: [78, 85, 62, 71, 58],
                backgroundColor: [colors.blue, colors.purple, colors.green, colors.yellow, colors.red],
                borderRadius: 6
              }]
            },
            options: {
              indexAxis: 'y',
              responsive: true,
              maintainAspectRatio: false,
              plugins: { legend: { display: false } },
              scales: {
                x: {
                  beginAtZero: true,
                  max: 100,
                  ticks: { 
                    color: colors.text,
                    callback: function(value) { return value + '%'; }
                  }
                },
                y: { ticks: { color: colors.text } }
              }
            }
          });
        }

        // Career Chart
        const careerCtx = document.getElementById('chartCareer');
        if (careerCtx) {
          new Chart(careerCtx, {
            type: 'bar',
            data: {
              labels: ['Data Analyst', 'BI Developer', 'Data Scientist', 'AI/ML Engineer', 'BA Manager'],
              datasets: [{
                label: 'Avg Salary ($K)',
                data: [75, 85, 110, 125, 95],
                backgroundColor: [colors.green, colors.blue, colors.purple, colors.red, colors.yellow],
                borderRadius: 8
              }]
            },
            options: {
              responsive: true,
              maintainAspectRatio: false,
              plugins: { legend: { display: false } },
              scales: {
                y: {
                  beginAtZero: true,
                  ticks: { 
                    color: colors.text,
                    callback: function(value) { return '$' + value + 'K'; }
                  }
                },
                x: { ticks: { color: colors.text } }
              }
            }
          });
        }

        // Skills Chart
        const skillsCtx = document.getElementById('chartSkills');
        if (skillsCtx) {
          new Chart(skillsCtx, {
            type: 'radar',
            data: {
              labels: ['Programming', 'Statistics', 'Business', 'Communication', 'Visualization'],
              datasets: [{
                label: 'Business Analyst',
                data: [60, 70, 95, 90, 85],
                borderColor: colors.blue,
                backgroundColor: colors.blue + '20',
                pointBackgroundColor: colors.blue
              }, {
                label: 'Data Scientist',
                data: [95, 90, 75, 70, 80],
                borderColor: colors.red,
                backgroundColor: colors.red + '20',
                pointBackgroundColor: colors.red
              }]
            },
            options: {
              responsive: true,
              maintainAspectRatio: false,
              plugins: { legend: { labels: { color: colors.text } } },
              scales: {
                r: {
                  beginAtZero: true,
                  max: 100,
                  ticks: { display: false },
                  pointLabels: { color: colors.text }
                }
              }
            }
          });
        }

        console.log('Charts initialized successfully');
      } catch (error) {
        console.log('Chart initialization error:', error);
      }
    }

    function initializeNavigation() {
      try {
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const navdots = document.getElementById('navdots');

        function getCurrentSectionIndex() {
          const scrollTop = document.querySelector('.snap-wrapper').scrollTop;
          const sectionElements = sections.map(id => document.getElementById(id));
          let closestIndex = 0;
          let closestDistance = Infinity;
          
          sectionElements.forEach((section, index) => {
            if (section) {
              const distance = Math.abs(section.offsetTop - scrollTop);
              if (distance < closestDistance) {
                closestDistance = distance;
                closestIndex = index;
              }
            }
          });
          
          return closestIndex;
        }

        function goToSection(index) {
          if (index >= 0 && index < sections.length) {
            const targetSection = document.getElementById(sections[index]);
            if (targetSection) {
              targetSection.scrollIntoView({ behavior: 'smooth' });
            }
          }
        }

        // Navigation buttons
        if (prevBtn) {
          prevBtn.addEventListener('click', function() {
            const current = getCurrentSectionIndex();
            goToSection(current - 1);
          });
        }

        if (nextBtn) {
          nextBtn.addEventListener('click', function() {
            const current = getCurrentSectionIndex();
            goToSection(current + 1);
          });
        }

        // Keyboard navigation
        document.addEventListener('keydown', function(e) {
          if (e.key === 'ArrowDown' || e.key === 'PageDown') {
            e.preventDefault();
            const current = getCurrentSectionIndex();
            goToSection(current + 1);
          } else if (e.key === 'ArrowUp' || e.key === 'PageUp') {
            e.preventDefault();
            const current = getCurrentSectionIndex();
            goToSection(current - 1);
          }
        });

        // Navigation dots
        if (navdots) {
          sections.forEach(function(sectionId, index) {
            const dot = document.createElement('button');
            dot.title = sectionId;
            dot.addEventListener('click', function() {
              goToSection(index);
            });
            navdots.appendChild(dot);
          });

          function updateDots() {
            const current = getCurrentSectionIndex();
            const dots = navdots.querySelectorAll('button');
            dots.forEach(function(dot, index) {
              if (index === current) {
                dot.classList.add('active');
              } else {
                dot.classList.remove('active');
              }
            });
          }

          document.querySelector('.snap-wrapper').addEventListener('scroll', updateDots);
          updateDots();
        }

        // Navigation links
        const navLinks = document.querySelectorAll('.nav-link');
        navLinks.forEach(function(link) {
          link.addEventListener('click', function(e) {
            e.preventDefault();
            const target = link.getAttribute('data-target');
            const targetElement = document.getElementById(target);
            if (targetElement) {
              targetElement.scrollIntoView({ behavior: 'smooth' });
            }
          });
        });

        console.log('Navigation initialized successfully');
      } catch (error) {
        console.log('Navigation initialization error:', error);
      }
    }

    function initializeGeminiHelper() {
      try {
        const helper = document.getElementById('helper');
        const toggle = document.getElementById('helperToggle');
        const close = document.getElementById('helperClose');
        const prompt = document.getElementById('helperPrompt');
        const apiKeyInput = document.getElementById('apiKeyInput');
        const saveKey = document.getElementById('saveApiKey');
        const askLive = document.getElementById('askLiveGemini');
        const openWeb = document.getElementById('openGeminiWeb');
        const copyBtn = document.getElementById('copyPrompt');
        const clearBtn = document.getElementById('clearPrompt');
        const response = document.getElementById('geminiResponse');
        const responseText = document.getElementById('responseText');
        const loading = document.getElementById('loadingSpinner');
        const status = document.getElementById('statusMsg');
        const apiSetup = document.getElementById('apiSetup');

        // Load saved API key
        try {
          const savedKey = localStorage.getItem('geminiApiKey');
          if (savedKey) {
            geminiApiKey = savedKey;
            if (apiKeyInput) apiKeyInput.value = '••••••••••••';
            if (askLive) askLive.disabled = false;
            if (apiSetup) {
              apiSetup.className = 'mt-3 p-3 bg-green-50 border-green-200 rounded';
              const h4 = apiSetup.querySelector('h4');
              if (h4) h4.textContent = '✅ API Key Configured';
            }
          }
        } catch (e) {
          console.log('LocalStorage not available');
        }

        // Event listeners
        if (toggle) {
          toggle.addEventListener('click', function() {
            if (helper) {
              helper.hidden = !helper.hidden;
            }
          });
        }

        if (close) {
          close.addEventListener('click', function() {
            if (helper) {
              helper.hidden = true;
            }
          });
        }

        if (saveKey) {
          saveKey.addEventListener('click', function() {
            const key = apiKeyInput ? apiKeyInput.value.trim() : '';
            if (key && key !== '••••••••••••') {
              geminiApiKey = key;
              try {
                localStorage.setItem('geminiApiKey', key);
              } catch (e) {
                console.log('LocalStorage not available');
              }
              if (apiKeyInput) apiKeyInput.value = '••••••••••••';
              if (askLive) askLive.disabled = false;
              if (apiSetup) {
                apiSetup.className = 'mt-3 p-3 bg-green-50 border-green-200 rounded';
                const h4 = apiSetup.querySelector('h4');
                if (h4) h4.textContent = '✅ API Key Configured';
              }
              if (status) {
                status.textContent = '🔑 API key saved successfully!';
                status.className = 'note mt-2 text-green-600';
              }
            } else {
              if (status) {
                status.textContent = '⚠️ Please enter a valid API key.';
                status.className = 'note mt-2 text-red-600';
              }
            }
          });
        }

        if (askLive) {
          askLive.addEventListener('click', async function() {
            const question = prompt ? prompt.value.trim() : '';
            if (!question) {
              if (status) {
                status.textContent = '⚠️ Please enter a question first.';
                status.className = 'note mt-2 text-orange-600';
              }
              return;
            }

            if (!geminiApiKey) {
              if (status) {
                status.textContent = '⚠️ Please configure your API key first.';
                status.className = 'note mt-2 text-red-600';
              }
              return;
            }

            // Show loading
            if (response) response.style.display = 'block';
            if (loading) loading.style.display = 'block';
            if (responseText) responseText.textContent = 'Thinking...';
            askLive.disabled = true;
            askLive.textContent = '⏳ Thinking...';

            try {
              const result = await fetch('https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent', {
                method: 'POST',
                headers: {
                  'Content-Type': 'application/json',
                  'X-goog-api-key': geminiApiKey
                },
                body: JSON.stringify({
                  contents: [{
                    parts: [{
                      text: 'As a business analytics instructor, provide a clear educational response to: "' + question + '". Include practical examples and mention relevant tools (Excel, Sheets, Tableau, etc.). Keep it concise (2-3 paragraphs).'
                    }]
                  }],
                  generationConfig: {
                    temperature: 0.7,
                    maxOutputTokens: 1024
                  }
                })
              });

              if (!result.ok) {
                throw new Error('API Error: ' + result.status);
              }

              const data = await result.json();
              if (data.candidates && data.candidates[0] && data.candidates[0].content) {
                if (responseText) responseText.textContent = data.candidates[0].content.parts[0].text;
                if (status) {
                  status.textContent = '🤖 Response generated successfully!';
                  status.className = 'note mt-2 text-green-600';
                }
              } else {
                throw new Error('No response generated');
              }

            } catch (error) {
              if (responseText) responseText.textContent = '❌ Error: ' + error.message + '\n\nTip: Check your API key and try again.';
              if (status) {
                status.textContent = '❌ Failed to get response.';
                status.className = 'note mt-2 text-red-600';
              }
            } finally {
              if (loading) loading.style.display = 'none';
              askLive.disabled = false;
              askLive.textContent = '🧠 Ask Gemini';
            }
          });
        }

        if (openWeb) {
          openWeb.addEventListener('click', function() {
            const question = prompt ? prompt.value : 'Help with business analytics';
            window.open('https://gemini.google.com/app?q=' + encodeURIComponent(question), '_blank');
            if (status) {
              status.textContent = '🌐 Gemini web opened in new tab!';
              status.className = 'note mt-2 text-blue-600';
            }
          });
        }

        if (copyBtn) {
          copyBtn.addEventListener('click', async function() {
            try {
              const text = prompt ? prompt.value : '';
              await navigator.clipboard.writeText(text);
              if (status) {
                status.textContent = '📋 Copied to clipboard!';
                status.className = 'note mt-2 text-green-600';
              }
            } catch (e) {
              if (status) {
                status.textContent = '⚠️ Copy failed.';
                status.className = 'note mt-2 text-red-600';
              }
            }
          });
        }

        if (clearBtn) {
          clearBtn.addEventListener('click', function() {
            if (prompt) prompt.value = '';
            if (response) response.style.display = 'none';
            if (status) status.textContent = '';
          });
        }

        // Use prompt buttons
        const usePromptBtns = document.querySelectorAll('.use-prompt');
        usePromptBtns.forEach(function(btn) {
          btn.addEventListener('click', function() {
            const promptText = btn.getAttribute('data-prompt') || '';
            if (prompt) prompt.value = promptText;
            if (helper) helper.hidden = false;
            if (response) response.style.display = 'none';
            if (status) {
              status.textContent = '📝 Prompt loaded! Try asking Gemini.';
              status.className = 'note mt-2 text-blue-600';
            }
          });
        });

        console.log('Gemini helper initialized successfully');
      } catch (error) {
        console.log('Gemini helper initialization error:', error);
      }
    }

    function initializeInteractivity() {
      try {
        // Quiz functionality
        const answerBtns = document.querySelectorAll('.ans');
        answerBtns.forEach(function(btn) {
          btn.addEventListener('click', function() {
            const correct = btn.getAttribute('data-correct') === 'true';
            const msg = document.getElementById('quizMsg');
            if (msg) {
              msg.textContent = correct 
                ? '✅ Correct! A/B testing involves experimental design, which is part of Data Science.'
                : '❌ Not quite. Think about statistical experimental design.';
              msg.className = correct ? 'mt-2 text-sm text-green-600' : 'mt-2 text-sm text-red-600';
            }
          });
        });

        // Career plan generator
        const generateBtn = document.getElementById('generatePlan');
        const roleSelect = document.getElementById('roleSelect');
        const industrySelect = document.getElementById('industrySelect');
        const planDiv = document.getElementById('careerPlan');
        const planContent = document.getElementById('planContent');

        if (generateBtn && roleSelect && industrySelect && planDiv && planContent) {
          generateBtn.addEventListener('click', function() {
            const role = roleSelect.value;
            const industry = industrySelect.value;
            
            const plans = {
              'Data Analyst': {
                skills: ['SQL', 'Excel/Sheets', 'Tableau/Power BI', 'Statistics', 'Data Cleaning'],
                certs: ['Google Data Analytics', 'Tableau Desktop', 'Microsoft Excel Expert'],
                timeline: '3-6 months: Master SQL and Excel, then move to BI tools'
              },
              'BI Developer': {
                skills: ['SQL', 'ETL/Data Warehousing', 'Power BI/Tableau', 'Database Design'],
                certs: ['Microsoft Power BI', 'Tableau Server', 'AWS Cloud Practitioner'],
                timeline: '6-9 months: Advanced SQL, then cloud platforms and dashboards'
              },
              'Data Scientist': {
                skills: ['Python/R', 'Machine Learning', 'Statistics', 'SQL', 'Data Viz'],
                certs: ['Google ML', 'Coursera Data Science', 'AWS ML Specialty'],
                timeline: '9-12 months: Programming, then ML and advanced modeling'
              },
              'AI/ML Engineer': {
                skills: ['Python', 'TensorFlow/PyTorch', 'MLOps', 'Cloud', 'Software Eng'],
                certs: ['TensorFlow Developer', 'AWS ML', 'Kubernetes'],
                timeline: '12+ months: Deep learning frameworks and production systems'
              },
              'BA Manager': {
                skills: ['Leadership', 'Strategy', 'Data Storytelling', 'Project Mgmt'],
                certs: ['PMP', 'Google Analytics', 'Tableau Certified'],
                timeline: '6-9 months: Leadership skills plus advanced analytics'
              }
            };

            const plan = plans[role];
            if (plan) {
              planContent.innerHTML = 
                '<h4 class="font-bold text-purple-600 mb-2">' + role + ' in ' + industry + '</h4>' +
                '<div class="mb-3">' +
                '<strong>Key Skills:</strong>' +
                '<ul class="list-disc ml-6 text-xs mt-1">' +
                plan.skills.map(function(skill) { return '<li>' + skill + '</li>'; }).join('') +
                '</ul>' +
                '</div>' +
                '<div class="mb-3">' +
                '<strong>Recommended Certifications:</strong>' +
                '<ul class="list-disc ml-6 text-xs mt-1">' +
                plan.certs.map(function(cert) { return '<li>' + cert + '</li>'; }).join('') +
                '</ul>' +
                '</div>' +
                '<div class="mb-3">' +
                '<strong>Learning Timeline:</strong>' +
                '<p class="text-xs mt-1">' + plan.timeline + '</p>' +
                '</div>' +
                '<div class="bg-violet-50 p-2 rounded">' +
                '<p class="text-xs"><strong>Next Step:</strong> Start with the first skill listed and build a portfolio project!</p>' +
                '</div>';
              planDiv.style.display = 'block';
            }
          });
        }

        console.log('Interactivity initialized successfully');
      } catch (error) {
        console.log('Interactivity initialization error:', error);
      }
    }

    // Error handling
    window.addEventListener('error', function(e) {
      console.log('Global error caught:', e.message);
      return true; // Prevent default error handling
    });

// Fallback for older browsers
    if (!window.Chart) {
      console.log('Chart.js not loaded, charts will not display');
    }

    if (!window.fetch) {
      console.log('Fetch API not supported, Gemini integration will not work');
    }

  </script>
</body>
</html>
